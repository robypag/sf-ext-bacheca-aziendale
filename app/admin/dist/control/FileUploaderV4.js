sap.ui.define(["sap/ui/unified/FileUploader"],e=>e.extend("CustomFileUploader",{metadata:{},_sendFilesWithXHR(e){let t,a,i,s,r=this.getXhrSettings();if(e.length>0){if(this.getUseMultipart()){t=1}else{t=e.length}this._aXhr=this._aXhr||[];for(let l=0;l<t;l++){this._uploadXHR=new window.XMLHttpRequest;s={xhr:this._uploadXHR,requestHeaders:[]};this._aXhr.push(s);s.xhr.open("PUT",this.getUploadUrl(),true);if(r){s.xhr.withCredentials=r.getWithCredentials()}if(this.getHeaderParameters()){let e=this.getHeaderParameters();for(let t=0;t<e.length;t++){a=e[t].getName();i=e[t].getValue();s.requestHeaders.push({name:a,value:i})}}let t=e[l].name;let h=s.requestHeaders;s.fileName=t;s.file=e[l];this.fireUploadStart({fileName:t,requestHeaders:h});for(let e=0;e<h.length;e++){if(s.xhr.readyState===0){break}a=h[e].name;i=h[e].value;s.xhr.setRequestHeader(a,i)}}if(this.getUseMultipart()){let t=new window.FormData;let a=this.FUEl.name;for(let i=0;i<e.length;i++){this._appendFileToFormData(t,a,e[i])}t.append("_charset_","UTF-8");let r=this.FUDataEl.name;if(this.getAdditionalData()){let e=this.getAdditionalData();t.append(r,e)}else{t.append(r,"")}if(this.getParameters()){let e=this.getParameters();for(let a=0;a<e.length;a++){let s=e[a].getName();i=e[a].getValue();t.append(s,i)}}s.file=t;this.sendFiles(this._aXhr,0)}else{this.sendFiles(this._aXhr,0)}this._bUploading=false;this._resetValueAfterUploadStart()}return this},renderer:"sap.ui.unified.FileUploaderRenderer"}));